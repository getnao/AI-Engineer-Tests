version: 2

models:
  - name: wk_customers_db_license_versions
    tags: ["exception", "product"]
    description: Self-managed EE instances will send seat link information to the customers portal on a daily basis. This information includes a license version data. Additional detail can be found in [this doc](https://gitlab.com/gitlab-org/customers-gitlab-com/-/blob/staging/doc/reconciliations.md).
    columns:
      - name: id
        description: Pseudo ID generated to simulate Primary Key
        tags:
          - customers_db
      - name: item_id
        description: Line if for item
        tags:
          - customers_db
      - name: created_at
        description: Timestamp when the record was created
        tags:
          - customers_db
      - name: item_type
        description: Item type, for example - License
        tags:
          - customers_db
      - name: event
        description: Name of the event, for example - create, update
        tags:
          - customers_db
      - name: whodunnit
        description: Email for licensing
        tags:
          - customers_db
      - name: whodunnit_gitlab
        description: Email for licensing, contains either @gitlab.com email (value from whodunnit)  or NULL
        tags:
          - customers_db
      - name: whodunnit_gitlab_desc
        description: Email for licensing, contains either @gitlab.com email or NULL. Can contain `Admin` string
        tags:
          - customers_db
      - name: object
        description: Details about license
        tags:
          - customers_db
      - name: object_changes
        description: Details about license changes
        tags:
          - customers_db
      - name: _uploaded_at
        description: Timestamp when record is inserted in the RAW layer

  - name: wk_dedicated_runner_logs
    description: Runner usage logs from dedicated customers for usage monitoring on dedicated runners

  - name: wk_rpt_event_namespace_plan_monthly
    description: '{{ doc("wk_rpt_event_namespace_plan_monthly") }}'
    columns:
      - name: namespace_monthly_pk
        description: The unique identifier for an ultimate parent namespace and calendar month, generated by the surrogate_key macro in dbt
        data_tests:
          - not_null
          - unique
      - name: event_calendar_month
        description: '{{ doc("event_calendar_month") }}'
      - name: dim_ultimate_parent_namespace_id
        description: '{{ doc("dim_ultimate_parent_namespace_id") }}'
      - name: plan_id_at_event_month
        description: The ID of the ultimate parent namespace's plan on the final event in the calendar month (ex. 34, 100, 101, etc). Defaults to '34' (free) if a value is not available.
      - name: plan_name_at_event_month
        description: The name of the ultimate parent namespace's plan on the final event in the calendar month (ex. free, premium, ultimate, etc). Defaults to 'free' if a value is not available.
      - name: plan_was_paid_at_event_month
        description: Boolean flag which is set to True if the ultimate parent namespace's plan was paid on the final event in the calendar month. Defaults to False if a value is not available.
      - name: plan_id_count
        description: The distinct count of plan IDs associated with the ultimate parent namespace during the calendar month.
      - name: plan_id_list
        description: Comma-separated list of plan IDs associated with the ultimate parent namespace during the calendar month.
      - name: plan_name_list
        description: Comma-separated list of plan names associated with the ultimate parent namespace during the calendar month.
      - name: namespace_is_internal
        description: '{{ doc("namespace_is_internal") }}'
      - name: ultimate_parent_namespace_type
        description: '{{ doc("ultimate_parent_namespace_type") }}'
      - name: namespace_creator_is_blocked
        description: '{{ doc("namespace_creator_is_blocked") }}'
      - name: first_day_of_reporting_period
        description: First day of the 28-day reporting period used for xMAU and PI reporting. Defined as `DATEADD('day', -27, LAST_DAY(event_calendar_month))`
      - name: last_day_of_reporting_period
        description: Last day of the 28-day reporting period used for xMAU and PI reporting. Defined as `LAST_DAY(event_calendar_month)`
      - name: has_event_during_reporting_period
        description: Boolean flag set to True of the ultimate parent namespace has at least 1 event during the reporting period (i.e., last 28 days of the month). Filter to True in order to have this model tie out to "official" reporting models (ex. rpt_event_xmau_metric_monthly)
      - name: created_by
        description: '{{ doc("created_by") }}'
      - name: updated_by
        description: '{{ doc("updated_by") }}'
      - name: model_created_date
        description: '{{ doc("model_created_date") }}'
      - name: model_updated_date
        description: '{{ doc("model_updated_date") }}'
      - name: dbt_updated_at
      - name: dbt_created_at

  - name: suggested_merge_request_reviewers
    description: Table for exploring the suggested reviewers for a merge request

  - name: wk_gitlab_dotcom_namespace_details
    description: Workspace table for exposing gitlab_dotcom_namespace_details table to Sisense.

  - name: wk_gitlab_dotcom_namespace_details_snapshots
    description: Workspace table for exposing gitlab_dotcom_namespace_details_snapshots table to Sisense.

  - name: wk_gitlab_dotcom_web_hooks
    description: Workspace table for exposing gitlab_dotcom_web_hooks table to Sisense.

  - name: wk_usage_ping_geo_node_usage
    description: Workspace table for Service ping geo node usage
    columns:
      - name: uploaded_at
        description: '{{ doc("wk_usage_ping_geo_node_usage_uploaded_at") }}'
        data_tests:
          - not_null

  - name: wk_ping_installation_latest
    description: ' {{ doc("wk_ping_installation_latest") }} '
    columns:
    - name: dim_installation_id
      description: '{{ doc("dim_installation_id") }}'
    - name: latest_subscription_id
      description:  '{{ doc("latest_subscription_id") }}'
    - name: dim_crm_account_id
      description: '{{ doc("dim_crm_account_id") }}'
    - name: first_ping_created_at
      description: '{{ doc("first_ping_created_at") }}'
    - name: latest_ping_created_at
      description: '{{ doc("latest_ping_created_at") }}'
    - name: latest_ping_edition
      description: '{{ doc("ping_edition") }}'
    - name: latest_product_tier
      description: '{{ doc("ping_product_tier") }}'
    - name: latest_ping_edition_product_tier
      description: '{{ doc("ping_edition_product_tier") }}'
    - name: latest_major_minor_version
      description: '{{ doc("major_minor_version") }}'
    - name: latest_major_minor_version_num
      description: '{{ doc("major_minor_version_num") }}'
    - name: latest_is_internal_installation
      description: '{{ doc("is_internal_installation") }}'
    - name: latest_is_paid_subscription
      description: '{{ doc("is_paid_subscription") }}'

  - name: wk_account_level_code_suggestions
    description: '{{ doc("wk_account_level_code_suggestions") }}'
    columns:
      - name: crm_account_name
        description: '{{ doc("crm_account_name") }}'
      - name: dim_crm_account_id
        description: '{{ doc("dim_crm_account_id") }}'
      - name: gitlab_global_user_id
        description: '{{ doc("gitlab_global_user_id") }}'
      - name: _datetime
        description: Timestamp when the code suggestion request or event occurred.
      - name: app_id
        description: '{{ doc("app_id") }}'
      - name: language
        description: '{{ doc("code_suggestions_language") }}'
      - name: delivery_type
        description: '{{ doc("product_delivery_type") }}'
      - name: product_deployment_type
        description: '{{ doc("product_deployment_type") }}'
      - name: is_direct_connection
        description: '{{ doc("code_suggestions_is_direct_connection") }}'
      - name: suggestion_id
        description: '{{ doc("code_suggestions_suggestion_id") }}'
      - name: behavior_structured_event_pk
        description: '{{ doc("behavior_structured_event_pk") }}'
      - name: suggestion_source
        description: '{{ doc("code_suggestions_suggestion_source") }}'
      - name: model_engine
        description: '{{ doc("model_engine") }}'
      - name: model_name
        description: '{{ doc("model_name") }}'
      - name: extension_name
        description: '{{ doc("extension_name") }}'
      - name: extension_version
        description: '{{ doc("extension_version") }}'
      - name: ide_name
        description: '{{ doc("ide_name") }}'
      - name: ide_version
        description: '{{ doc("ide_version") }}'
      - name: ide_vendor
        description: '{{ doc("ide_vendor") }}'
      - name: language_server_version
        description: '{{ doc("language_server_version") }}'
      - name: has_advanced_context
        description: '{{ doc("code_suggestions_has_advanced_context") }}'
      - name: is_streaming
        description: '{{ doc("code_suggestions_is_streaming") }}'
      - name: is_invoked
        description: '{{ doc("code_suggestions_is_invoked") }}'
      - name: options_count
        description: '{{ doc("code_suggestions_options_count") }}'
      - name: display_time_in_ms
        description: '{{ doc("code_suggestions_display_time_in_ms") }}'
      - name: load_time_in_ms
        description: '{{ doc("code_suggestions_load_time_in_ms") }}'
      - name: time_to_show_in_ms
        description: '{{ doc("code_suggestions_time_to_show_in_ms") }}'
      - name: suggestion_outcome
        description: '{{ doc("code_suggestions_suggestion_outcome") }}'
      - name: was_requested
        description: '{{ doc("code_suggestions_was_requested")}} '
      - name: was_loaded
        description: '{{ doc("code_suggestions_was_loaded")}} '
      - name: was_shown
        description: '{{ doc("code_suggestions_was_shown")}} '
      - name: was_accepted
        description: '{{ doc("code_suggestions_was_accepted")}} '
      - name: was_rejected
        description: '{{ doc("code_suggestions_was_rejected")}} '
      - name: was_cancelled
        description: '{{ doc("code_suggestions_was_cancelled")}} '
      - name: was_not_provided
        description: '{{ doc("code_suggestions_was_not_provided")}} '
      - name: was_error
        description: '{{ doc("code_suggestions_was_error")}} '
      - name: was_stream_started
        description: '{{ doc("code_suggestions_was_stream_started") }}'
      - name: was_stream_completed
        description: '{{ doc("code_suggestions_was_stream_completed") }}'
      - name: input_tokens
        description: '{{ doc("input_tokens") }}'
      - name: output_tokens
        description: '{{ doc("output_tokens") }}'

  - name: wk_gitlab_dotcom_monthly_ci_compute_minutes
    description: '{{ doc("wk_gitlab_dotcom_monthly_ci_compute_minutes") }}'
    columns:
      - name: namespace_reporting_month_pk
        description: Surrogate key combining the reporting month and namespace ID to uniquely identify each namespace's monthly report record.
      - name: reporting_month
        description: '{{ doc("reporting_month") }}'
      - name: ultimate_parent_namespace_id
        description: '{{ doc("dim_ultimate_parent_namespace_id") }}'
      - name: dim_project_id
        description: '{{ doc("dim_project_id") }}'
      - name: dim_user_id
        description: '{{ doc("dim_user_id") }}'
      - name: plan_title
        description: '{{ doc("plan_title") }}'
      - name: runner_type
        description: Indicates whether the CI/CD runner was a GitLab-provided shared runner or a self-managed runner provided by the user.
      - name: ci_pipeline_source
        description: '{{ doc("ci_pipeline_source") }}'
      - name: ci_runner_machine_type
        description: The type of machine that ran the pipeline, affecting the cost factor applied to compute minute calculations.
      - name: count_of_runners
        description: The number of distinct CI runners used during the reporting month for this namespace.
      - name: count_of_pipelines
        description: The number of distinct CI pipelines executed during the reporting month for this namespace.
      - name: ci_build_minutes
        description: The total number of minutes spent on CI builds during the reporting month, before applying any cost factors.
      - name: compute_minutes_with_cost_factor
        description: The total number of compute minutes after applying the cost factor based on machine type, representing the actual quota consumption.
      - name: included_compute_credits
        description: The number of compute minutes included with the namespace's subscription plan (varies by plan tier).
      - name: total_purchases
        description: The count of total compute minute purchases made by the namespace during the reporting month.
      - name: created_by
        description: '{{ doc("created_by") }}'
      - name: updated_by
        description: '{{ doc("updated_by") }}'
      - name: model_created_date
        description: '{{ doc("model_created_date") }}'
      - name: model_updated_date
        description: '{{ doc("model_updated_date") }}'
      - name: dbt_updated_at
        description: '{{ doc("dbt_updated_at") }}'
      - name: dbt_created_at
        description: '{{ doc("dbt_created_at") }}'
  - name: wk_dim_duo_workflow_user
    description: >
      Dimension model that represents the relationship between users, namespaces, and GitLab Duo workflows.
      This serves as a bridge table in the Kimball dimensional model, connecting users to workflows with
      namespaces as additional context. The identifiers in this table have a many-to-many relationship.
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - ultimate_parent_namespace_id
            - gitlab_global_user_id
            - workflow_id
    columns:
      - name: workflow_id
        description: Unique identifier for the Duo workflow, used to track a workflow across multiple events and actions.
      - name: ultimate_parent_namespace_id
        description: Identifier for the top-level namespace where the workflow event was triggered. More than 1 top-level namespaces can be associated with a single workflow_id.
      - name: gitlab_global_user_id
        description: Unique identifier for the GitLab user who interacted with the workflow. More than 1 users can be associated with a single workflow_id.

  - name: wk_fct_duo_workflow
    description: >
      Fact table capturing metrics and characteristics of GitLab Duo workflows. This model follows the Kimball
      dimensional modeling approach by focusing on measurable workflow events and linking to appropriate dimensions.
      Contains comprehensive workflow metrics including timing, tokens, user counts, and status information.
      Each row represents a single workflow with its metrics and attributes.
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - workflow_id
    columns:
      - name: workflow_id
        description: Unique identifier for the Duo workflow, used to track a workflow across multiple events and actions.
      - name: workflow_start_date
        description: The date when the workflow was initiated, derived from the date of the first event in the workflow.
      - name: first_timestamp
        description: Precise timestamp when the first event in the workflow occurred.
      - name: last_timestamp
        description: Precise timestamp when the last event in the workflow occurred.
      - name: workflow_duration_minutes
        description: Duration of the workflow in minutes, calculated as the difference between the first and last timestamps.
      - name: ultimate_parent_namespace_id
        description: Identifier for the top-level namespace where the first workflow request event occurred.
      - name: ultimate_parent_namespace_ids
        description: Array of all top-level namespace IDs associated with events sharing the same workflow ID, showing where workflow actions take place.
      - name: namespace_is_internal
        description: Flag indicating whether the namespace is internal to GitLab. TRUE for GitLab team namespaces that appear on a manually updated list.
      - name: count_namespaces
        description: Count of distinct top-level namespaces associated with the workflow, indicating its scope.
      - name: dim_crm_account_id
        description: Identifier for the CRM account associated with the workflow, used for joining to account dimensions. If multiple accounts are associated with a workflow or namespace, the account with the highest license count is selected.
      - name: dim_parent_crm_account_id
        description: Identifier for the parent CRM account, useful for account hierarchy analysis. If multiple accounts are associated with a workflow or namespace, the account with the highest license count is selected.
      - name: crm_account_name
        description: Name of the CRM account associated with the workflow. If multiple accounts are associated with a workflow or namespace, the account with the highest license count is selected.
      - name: parent_crm_account_name
        description: Name of the parent CRM account, useful for reporting at parent company level.  If multiple accounts are associated with a workflow or namespace, the account with the highest license count is selected.
      - name: count_users
        description: Count of distinct users who interacted with the workflow, indicating its reach.
      - name: duo_workflow_request_category
        description: Category of the workflow request (event_category) from the first event, indicating the workflow type or purpose.
      - name: event_action_array
        description: String containing all distinct event actions that occurred during the workflow, useful for understanding the workflow path.
      - name: is_cancelled
        description: Flag indicating whether the workflow was explicitly cancelled by the user (TRUE if cancelled).
      - name: is_resumed
        description: Flag indicating whether the workflow was resumed after being paused (TRUE if resumed).
      - name: workflow_status
        description: >
          Classified status of the workflow based on event patterns and cancellation flag.
          Possible values include: 'Tool Fail', 'Stopped', 'Complete', 'Failure', and 'Incomplete'.
      - name: finished_status
        description: >
          High-level indication of whether the workflow reached a conclusion.
          Values are 'Finished' or 'Unfinished', with 'Unfinished' indicating either explicit cancellation or other interruption.
      - name: input_tokens
        description: Total number of input tokens used by the workflow, summing across all events.
      - name: output_tokens
        description: Total number of output tokens generated by the workflow, summing across all events.
      - name: overall_tokens
        description: Sum of input and output tokens, representing the total token usage for the workflow.
      - name: gsc_is_gitlab_team_member
        description: A user requesting an step in the workflow is a member of the GitLab.com namespace.
      - name: is_internal_usage_any
        description: If namespace_is_internal or gsc_is_gitlab_team_member is TRUE, is_internal_usage_any is TRUE. Internal usage identified as either usage from a GitLab.com member or from a namesapce appearing on a list of internal namespaces. 

  - name: wk_unify_ai_reporting
    description: '{{ doc("wk_unify_ai_reporting") }}'
    columns:
      - name: date_day
        description: '{{ doc("date_actual") }}'
      - name: ai_feature
        description: The specific AI feature or capability being measured, such as duo_chat, explain_vulnerability, or summarize_comments.
      - name: plan
        description: '{{ doc("gsc_plan") }}'
      - name: internal_or_external
        description: Indicates whether the user is internal (GitLab team member) or external (customer or community user), with 'All' representing aggregated metrics for both categories.
      - name: client
        description: The client type or interface where the AI feature was used, such as browser, IDE, or specific client implementation.
      - name: delivery_type
        description: '{{ doc("product_delivery_type") }}'
      - name: metric_value
        description: '{{ doc("metric_value") }}'
      - name: metric
        description: The type of metric being reported, such as 'DAU' (Daily Active Users), 'MAU' (Monthly Active Users), or 'WAU' (Weekly Active Users).

  - name: wk_navigation_metrics_monthly
    description: '{{ doc("wk_navigation_metrics_monthly") }}'
    columns:
      - name: page_view_month
        description: The calendar month for which the navigation metrics are aggregated, stored as a date corresponding to the first day of the month.
      - name: using_new_nav
        description: Binary indicator where 1 represents usage of the new navigation interface and 0 represents usage of the old navigation interface.
      - name: nav_users
        description: Count of unique users who interacted with navigation elements during the month.
      - name: unique_users
        description: Total count of unique users who performed any action on GitLab during the month, used as the denominator for adoption calculations.
      - name: nav_sessions
        description: Count of unique sessions that included navigation interactions during the month.
      - name: event_sessions
        description: Total count of all sessions on GitLab during the month, used as the denominator for session ratio calculations.
      - name: nav_pageviews
        description: Count of navigation-related page views or interactions during the month.
      - name: total_pageviews
        description: Total count of all page views on GitLab during the month, used as the denominator for pageview ratio calculations.
      - name: percent_users_on_navigation
        description: The percentage of total users who interacted with navigation elements, calculated as nav_users divided by unique_users.
      - name: ratio_navigations_to_sessions
        description: The ratio of navigation-related sessions to total sessions, calculated as nav_sessions divided by event_sessions.
      - name: ratio_nav_views_to_all
        description: The ratio of navigation-related page views to total page views, calculated as nav_pageviews divided by total_pageviews.


  - name: wk_navigation_metrics_weekly
    description: '{{ doc("wk_navigation_metrics_weekly") }}'
    columns:
      - name: event_week
        description: The calendar week (starting on Monday) for which the navigation metrics are aggregated, stored as a date corresponding to the first day of the week.
      - name: using_new_nav
        description: Binary indicator where 1 represents usage of the new navigation interface and 0 represents usage of the old navigation interface.
      - name: nav_users
        description: Count of unique users who interacted with navigation elements during the week.
      - name: unique_users
        description: Total count of unique users who performed any action on GitLab during the week, used as the denominator for adoption calculations.
      - name: nav_sessions
        description: Count of unique sessions that included navigation interactions during the week.
      - name: event_sessions
        description: Total count of all sessions on GitLab during the week, used as the denominator for session ratio calculations.
      - name: nav_pageviews
        description: Count of navigation-related page views or interactions during the week.
      - name: total_pageviews
        description: Total count of all page views on GitLab during the week, used as the denominator for pageview ratio calculations.
      - name: percent_users_on_navigation
        description: The percentage of total users who interacted with navigation elements, calculated as NAV_USERS divided by UNIQUE_USERS.
      - name: ratio_navigations_to_sessions
        description: The ratio of navigation-related sessions to total sessions, calculated as NAV_SESSIONS divided by EVENT_SESSIONS.
      - name: ratio_nav_views_to_all
        description: The ratio of navigation-related page views to total page views, calculated as NAV_PAGEVIEWS divided by TOTAL_PAGEVIEWS.

  - name: wk_gitlab_dotcom_verify_snowplow_events
    description: '{{ doc("wk_gitlab_dotcom_verify_snowplow_events") }}'
    columns:
      - name: event_reporting_month_pk
        description: Surrogate key generated by combining the reporting month and namespace ID to uniquely identify each record.
      - name: reporting_month
        description: '{{ doc("reporting_month") }}'
      - name: plan_name_modified
        description: '{{ doc("plan_name_modified") }}'
      - name: ultimate_parent_namespace_id
        description: '{{ doc("dim_ultimate_parent_namespace_id") }}'
      - name: gsc_project_id
        description: '{{ doc("gsc_project_id") }}'
      - name: metric
        description: The specific verification feature or action being measured, such as 'pipeline_editor_pageview' or 'pipeline_table_action_buttons'.
      - name: total_events
        description: Count of events that match the dimensions in this record.
      - name: total_users
        description: Count of distinct users who performed the action defined by the metric in the reporting month.
      - name: created_by
        description: '{{ doc("created_by") }}'
      - name: updated_by
        description: '{{ doc("updated_by") }}'
      - name: model_created_date
        description: '{{ doc("model_created_date") }}'
      - name: model_updated_date
        description: '{{ doc("model_updated_date") }}'
      - name: dbt_updated_at
        description: '{{ doc("dbt_updated_at") }}'
      - name: dbt_created_at
        description: '{{ doc("dbt_created_at") }}'

  - name: wk_gitlab_dotcom_package_events
    description: '{{ doc("wk_gitlab_dotcom_package_events") }}'
    columns:
      - name: event_reporting_month_pk
        description: Surrogate key generated by combining the reporting month and namespace ID to uniquely identify each record.
      - name: reporting_month
        description: '{{ doc("reporting_month") }}'
      - name: event_category
        description: '{{ doc("event_category") }}'
      - name: metric
        description: The specific package or container registry action being tracked, such as 'pull_package', 'push_package', or 'page_view_package'.
      - name: plan_name_modified
        description: '{{ doc("plan_name_modified") }}'
      - name: ultimate_parent_namespace_id
        description: '{{ doc("dim_ultimate_parent_namespace_id") }}'
      - name: gsc_project_id
        description: '{{ doc("gsc_project_id") }}'
      - name: gsc_pseudonymized_user_id
        description: '{{ doc("gsc_pseudonymized_user_id") }}'
      - name: total_events
        description: Count of events that match the dimensions in this record.
      - name: created_by
        description: '{{ doc("created_by") }}'
      - name: updated_by
        description: '{{ doc("updated_by") }}'
      - name: model_created_date
        description: '{{ doc("model_created_date") }}'
      - name: model_updated_date
        description: '{{ doc("model_updated_date") }}'
      - name: dbt_updated_at
        description: '{{ doc("dbt_updated_at") }}'
      - name: dbt_created_at
        description: '{{ doc("dbt_created_at") }}'

  - name: wk_ai_users_list
    description: '{{ doc("wk_ai_users_list") }}'
    columns:
      - name: ultimate_parent_namespace_id
        description: '{{ doc("dim_ultimate_parent_namespace_id") }}'
      - name: owner_user_id
        description: The user ID of the owner of the namespace, identified by having access level 50 (Owner) in the members table.
      - name: cs_enabled_and_use
        description: Boolean flag indicating whether Code Suggestions is enabled for the namespace and has been used at least once.
      - name: duo_enabled_and_use
        description: Boolean flag indicating whether Duo Chat is enabled for the namespace and has been used at least once.
      - name: code_suggestion_user_count
        description: The number of unique users within the namespace who have used Code Suggestions.
      - name: code_suggestion_event_count
        description: The total count of Code Suggestion events recorded for the namespace.
      - name: user_count_chat
        description: The number of unique users within the namespace who have used Duo Chat features.
      - name: event_count_chat
        description: The total count of Duo Chat events recorded for the namespace.
      - name: used_both
        description: Boolean flag indicating whether the namespace has used both Code Suggestions and Duo Chat features.
      - name: trial_v_purchasers
        description: Categorization of the namespace's relationship with Duo Pro, indicating whether they are on a trial, have purchased the feature, or neither.

  - name: wk_ci_cd_metrics_monthly
    description: '{{ doc("wk_ci_cd_metrics_monthly") }}'
    columns:
      - name: installation_reporting_month_pk
        description: Surrogate key generated by combining the installation ID and reporting month, serving as the primary key for this table.
      - name: dim_installation_id
        description: '{{ doc("dim_installation_id") }}'
      - name: delivery_type
        description: '{{ doc("product_delivery_type") }}'
      - name: reporting_month
        description: '{{ doc("reporting_month") }}'
      - name: edition
        description: The GitLab edition of the installation (CE or EE).
      - name: product_tier
        description: '{{ doc("ping_product_tier") }}'
      - name: major_version
        description: '{{ doc("major_version") }}'
      - name: minor_version
        description: '{{ doc("minor_version") }}'
      - name: umau
        description: Unique Monthly Active Users count for the installation during the reporting month.
      - name: cmau
        description: Continuous Monthly Active Users count, representing users who have used any CI/CD feature (includes verify_smau, package_smau, and deploy_smau).
      - name: verify_smau
        description: Stage Monthly Active Users count for the Verify stage, representing users who have used features related to CI/CD verification.
      - name: package_smau
        description: Stage Monthly Active Users count for the Package stage, representing users who have used features related to package management and registry.
      - name: deploy_smau
        description: Stage Monthly Active Users count for the Deploy stage, representing users who have used features related to deployment and release management.
      - name: created_by
        description: '{{ doc("created_by") }}'
      - name: updated_by
        description: '{{ doc("updated_by") }}'
      - name: model_created_date
        description: '{{ doc("model_created_date") }}'
      - name: model_updated_date
        description: '{{ doc("model_updated_date") }}'
      - name: dbt_updated_at
        description: '{{ doc("dbt_updated_at") }}'
      - name: dbt_created_at
        description: '{{ doc("dbt_created_at") }}'

  - name: wk_namespace_attributes_and_ptp_score_change
    description: '{{ doc("wk_namespace_attributes_and_ptp_score_change") }}'
    columns:
      - name: ptp_score_date_month
        description: The calendar month for which the PTP score was calculated, stored as a date corresponding to the first day of the month.
      - name: visibility_level
        description: '{{ doc("visibility_level") }}'
      - name: namespace_contains_valuable_signup
        description: Boolean flag indicating whether the namespace contains at least one user considered a valuable signup.
      - name: has_team_activation
        description: Boolean flag indicating whether the namespace has achieved team activation criteria, typically defined as having multiple active users.
      - name: creator_is_valuable_signup
        description: Boolean flag indicating whether the creator of the namespace meets the valuable signup criteria.
      - name: namespace_creator_role
        description: The role selected by the namespace creator during signup or onboarding.
      - name: namespace_creator_jtbd
        description: The "job to be done" or primary use case selected by the namespace creator during signup or onboarding.
      - name: ptp_score_group
        description: The current Product-to-Paid score group assigned to the namespace, representing its likelihood to convert to paid.
      - name: previous_ptp_score
        description: The previous Product-to-Paid score group for the namespace, from the preceding scoring period.
      - name: ptp_score_group_change
        description: The numerical change in PTP score group between the previous and current scoring periods (positive numbers represent improvement).
      - name: ptp_change_categories
        description: Categorical classification of the score change (e.g., 'ptp_score_increase', 'ptp_score_decrease', 'no_change', 'first_paid_subscription_start', 'no_prior_score').
      - name: ptp_improvement
        description: Boolean flag indicating whether the namespace's PTP score improved (TRUE), worsened (FALSE), or had no prior score for comparison (NULL).
      - name: count_top_level_group_namespaces
        description: Count of distinct top-level group namespaces that meet the criteria for each row grouping.
      - name: created_by
        description: '{{ doc("created_by") }}'
      - name: updated_by
        description: '{{ doc("updated_by") }}'
      - name: model_created_date
        description: '{{ doc("model_created_date") }}'
      - name: model_updated_date
        description: '{{ doc("model_updated_date") }}'
      - name: dbt_updated_at
        description: '{{ doc("dbt_updated_at") }}'
      - name: dbt_created_at
        description: '{{ doc("dbt_created_at") }}'
